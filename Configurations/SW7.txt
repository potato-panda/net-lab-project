enable
configure terminal
hostname SW7
! secure switch access
username gns3 privilege 15 secret gns3
! enable new access control commands for TACACS+ auth
aaa new-model
tacacs server tacacs
address ipv4 10.0.51.101
key gns3
exit
! login authentication using tacacs+ if not local
aaa authentication login default group tacacs+ local
! exec mode authorization using tacacs+ if not local
aaa authorization exec default group tacacs+ local
! required for encryption use for remote access
ip domain name netlab.com
! allow only version 2 for SSH
ip ssh version 2
! required for SSHv2
crypto key generate rsa modulus 2048
! configure remote access
line vty 0 4
! allow only SSH
transport input ssh
! login using default method
login authentication default
exit
spanning-tree mode mst
spanning-tree mst configuration
instance 1 vlan 20,30,51
vtp version 3
vtp domain netlab.com
vtp mode client
! trunked interfaces
interface range GigabitEthernet0/0-1
switchport trunk encapsulation dot1q
switchport trunk allowed vlan 20,30,51
switchport trunk native vlan 81
switchport mode trunk
! server-facing interfaces
interface range GigabitEthernet1/0-1 
switchport access vlan 20
! block BPDU on these ports: We do not expect a switch here
spanning-tree bpduguard enable
! portfast to skip to forwarding state. We expect a host here
spanning-tree portfast
end
